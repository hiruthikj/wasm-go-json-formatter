<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <script src="wasm_exec.js"></script>
        <script>
            const go = new Go();
            WebAssembly.instantiateStreaming(fetch("json.wasm"), go.importObject).then((result) => {
                go.run(result.instance)
            })
        </script>

    </head>

    <body>
        <textarea name="jsoninput" id="jsoninput" cols="80" rows="20"></textarea>
        <textarea name="jsonoutput" id="jsonoutput" cols="80" rows="20"></textarea>
        <br>
        <input type="submit" value="pretty json" id="button" name="button" onclick="json(jsoninput.value)" />

        <script>
            var json = function(input) {
                var [result, err] = formatJSON(input)
                console.log("Value from go: ", result)
                if (err != null) {
                    jsonoutput.value = ""
                    alert("error: " + err)
                }
            } 
        </script>

    </body>

</html>